<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/GraficaDirectores.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/GraficaDirectores.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview Componente que muestra gráfica de películas por director
 * 
 * Muestra un gráfico de pastel interactivo que visualiza la cantidad de películas
 * dirigidas por cada director. Utiliza la librería Recharts para la visualización.
 * 
 * @module components/GraficaDirectores
 * @requires react
 * @requires recharts
 * @requires @mui/material
 * @requires ../api
 */

import { useEffect, useState } from "react";
import { Pie, PieChart, Tooltip, Cell, Legend, Text, LabelList } from "recharts";

import api from "../api";
import { Typography } from "@mui/material";

/**
 * Componente que muestra gráfica de películas por director
 * 
 * Características:
 * - Obtiene datos de la API (/directors/graph)
 * - Muestra gráfico de pastel con colores variados
 * - Etiquetas con nombres de directores
 * - Tooltip interactivo al pasar el ratón
 * - Leyenda con directores
 * - Manejo de errores y estado vacío
 * 
 * @component
 * @returns {JSX.Element} Gráfico de pastel o mensajes de error/vacío
 */
function GraficaDirectores() {
  // Estado para almacenar los datos del gráfico
  const [datos, setDatos] = useState([]);
  
  // Estado para manejar errores
  const [error, setError] = useState(null);

  // Paleta de 50 colores para los diferentes directores
  const COLORS = [
    "#0088FE", "#00C49F", "#FFBB28", "#FF8042", "#A28BFE",
    "#FF4567", "#32CD32", "#8B008B", "#FF1493", "#00FFFF",
    "#7FFF00", "#D2691E", "#DC143C", "#FFD700", "#ADFF2F",
    "#8A2BE2", "#FF6347", "#40E0D0", "#DA70D6", "#FF4500",
    "#1E90FF", "#3CB371", "#9932CC", "#FF8C00", "#66CDAA",
    "#B22222", "#FF00FF", "#FFDEAD", "#4B0082", "#20B2AA",
    "#E6E6FA", "#8B4513", "#48D1CC", "#FF69B4", "#CD5C5C",
    "#4682B4", "#EE82EE", "#FF7F50", "#9ACD32", "#BA55D3",
    "#6495ED", "#2E8B57", "#FFB6C1", "#DB7093", "#5F9EA0",
    "#FFDAB9", "#FF0000", "#8FBC8F", "#7B68EE", "#FA8072",
  ];

  /**
   * Efecto para cargar los datos del gráfico al montar el componente
   */
  useEffect(() => {
    async function fetchDirectores() {
      try {
        // Obtener datos de películas por director del backend
        const respuesta = await api.get("/directors/graph");

        // Actualizar estado con los datos obtenidos
        setDatos(respuesta.datos);
        setError(null);
      } catch (error) {
        // En caso de error, mostrar mensaje
        setError(error.mensaje || "No se pudo conectar al servidor");
        setDatos([]);
      }
    }

    fetchDirectores();
  }, []);

  // Mostrar mensaje si hay error
  if (error != null) {
    return (
      &lt;>
        &lt;Typography variant="h5" align="center" sx={{ mt: 3 }}>
          {error}
        &lt;/Typography>
      &lt;/>
    );
  }

  // Mostrar mensaje si no hay datos
  if (!datos || datos.length === 0) {
    return (
      &lt;>
        &lt;Typography variant="h5" align="center" sx={{ mt: 3 }}>
          No hay datos disponibles
        &lt;/Typography>
      &lt;/>
    );
  }

  return (
    &lt;>
      {/* Título del gráfico */}
      &lt;Typography variant="h5" align="center" sx={{ mt: 3 }}>
        Número de películas por director
      &lt;/Typography>
      
      {/* Gráfico de pastel */}
      &lt;PieChart
        style={{
          width: "100%",
          height: "100%",
          maxHeight: "80vh",
          aspectRatio: 1,
        }}
        responsive
      >
        {/* Título del gráfico */}
        &lt;Text value="Peliculas por director" offset={70} position="outside" />
        
        {/* Componente Pie */}
        &lt;Pie
          data={datos}
          dataKey="total"
          nameKey="id_director_director.name"
          cx="50%"
          cy="50%"
          innerRadius={20}
          outerRadius="50%"
          fill="#8884d8"
          isAnimationActive={true}
          label
          legendType="circle"
        >
          {/* Asignar colores a cada segmento */}
          {datos.map((entry, index) => (
            &lt;Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
          ))}
          
          {/* Tooltip al pasar el ratón */}
          &lt;Tooltip />
          
          {/* Etiquetas de directores */}
          &lt;LabelList dataKey="id_director_director.name" offset={70} position="outside" />
        &lt;/Pie>
        
        {/* Leyenda del gráfico */}
        &lt;Legend verticalAlign="top" height={50} />
      &lt;/PieChart>
    &lt;/>
  );
}

export default GraficaDirectores;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-App.html">App</a></li><li><a href="module-api.html">api</a></li><li><a href="module-components_AltaDirector.html">components/AltaDirector</a></li><li><a href="module-components_AltaPelicula.html">components/AltaPelicula</a></li><li><a href="module-components_EditarDirector.html">components/EditarDirector</a></li><li><a href="module-components_EditarPelicula.html">components/EditarPelicula</a></li><li><a href="module-components_GraficaDirectores.html">components/GraficaDirectores</a></li><li><a href="module-components_Inicio.html">components/Inicio</a></li><li><a href="module-components_ListadoCardsDirectores.html">components/ListadoCardsDirectores</a></li><li><a href="module-components_ListadoDirectorFiltro.html">components/ListadoDirectorFiltro</a></li><li><a href="module-components_ListadoDirectores.html">components/ListadoDirectores</a></li><li><a href="module-components_ListadoDirectoresFiltroPDF.html">components/ListadoDirectoresFiltroPDF</a></li><li><a href="module-components_ListadoPeliculas.html">components/ListadoPeliculas</a></li><li><a href="module-components_ListadoPeliculasFiltro.html">components/ListadoPeliculasFiltro</a></li><li><a href="module-components_ListadoPeliculasFiltroPDF.html">components/ListadoPeliculasFiltroPDF</a></li><li><a href="module-components_Navbar.html">components/Navbar</a></li><li><a href="module-main.html">main</a></li><li><a href="module-pages_ErrorPage.html">pages/ErrorPage</a></li><li><a href="module-pages_Home.html">pages/Home</a></li><li><a href="module-utils_generatePDF.html">utils/generatePDF</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Thu Jan 22 2026 11:26:43 GMT+0100 (hora estándar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
